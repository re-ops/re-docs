(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{179:function(e,t,s){"use strict";s.r(t);var n=s(0),a=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),s("p",[e._v("Re-ops uses re-ops.edn and secrets.edn for its configuration example templates can be found under re-core/resources folder, we can start the configuration by copying them:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" resources/re-ops.edn ~/.re-ops.edn\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" resources/secrets.edn /tmp/re-ops.edn\n")])])]),s("p",[e._v("The secrets.edn includes passwords and tokens which are kept in a pgp encrypted file, once copied into /tmp we can add the information matching the hypervisors we use.")]),e._v(" "),s("p",[e._v("We will now encrypt the file by first generating the pgp password protected keypair :")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Generate a keyring and keys")]),e._v("\n$ gpg --no-default-keyring --keyring trustedkeys.gpg --fingerprint\n$ gpg --no-default-keyring --keyring trustedkeys.gpg --gen-key\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# A public and private keyrings exported")]),e._v("\n$ gpg --no-default-keyring --keyring trustedkeys.gpg --export "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v(" keys/public.gpg\n$ gpg --no-default-keyring --keyring trustedkeys.gpg --export-secret-keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v(' keys/secret.gpg"\n')])])]),s("p",[e._v("Once the keys are ready we can encrypte our secrets file:")]),e._v(" "),s("div",{staticClass:"language-clojure extra-class"},[s("pre",{pre:!0,attrs:{class:"language-clojure"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("re-core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("λ: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("require '"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("re-share.config.secret "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":refer")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("save-secrets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; create a secrets file under the re-core project folder")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("re-core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("λ: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("save-secrets "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/tmp/secrets.edn"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"secrets"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"keys/public.gpg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),s("p",[e._v("When launching re-core a Tmux window pane will open into which we should enter our keypair password:")])])}],!1,null,null,null);t.default=a.exports}}]);